#!/bin/bash
# Add the right theforeman.org repositories

set -eu

if [[ -n ${FOREMAN_VERSION:-} ]]; then
	cat > /etc/apt/sources.list.d/foreman.list <<-EOF
	deb http://deb.theforeman.org/ ${DISTRIBUTION} ${FOREMAN_VERSION}
	deb http://deb.theforeman.org/ plugins ${FOREMAN_VERSION}
	deb http://stagingdeb.theforeman.org/ ${DISTRIBUTION} theforeman-${FOREMAN_VERSION}
	EOF

	# The empty line after BEGIN PGP PUBLIC is needed by apt
	cat > /etc/apt/trusted.gpg.d/foreman.asc <<-EOF
	-----BEGIN PGP PUBLIC KEY BLOCK-----
	Version: GnuPG v2.0.22 (GNU/Linux)

	mQINBFcHYlkBEADV6XwyEgFMesEaBaY4VOYwT+m4OuThEemGRpW0dpvyEiqTfro5
	IGZGZYG9vLkqV/15TfJG8agbQHqfH8ALgKYMsD4IMfxrMtoe2YJzrtt7Sj/V4bON
	x7iKBk3o3CPDthomjx1KAHOuJtGGcffCNrrC8IJXlGe5MdWwRx8YFqG6VvKixfOW
	Uddaqm6B7RQYD76QcNyBgs4RNcZeAuilTJQT/eNxakrUTcRy6x7a7WCtryVJW33J
	5ARPJQxV/t7AxZg9Wg3kWXvxYtknHPthwpizuC1OsZzKETvgfMcc9RpLk5y659HW
	d3P7KH209aRTu04N4k/b4OZhNUq1Nu45k6UCcza5G5E+tJ7UvambHFzg+tsRbU84
	12nspYLffs+88WiSaBxLISvROhhN97xGoDVkbryC1H1+CfKDTYfJPV/ngK6nGkHo
	dd8t1mj4bYqUBPdO2HyZgCjk1+M5whn5NqvlwgxCgP3gfssZeYA1yLiWk80behfZ
	wuKHw4cfWEqMv3SOaazmXTrM9hAFxEpyYq+L/olP0cjOeCPqh7BHIBcQhTOfHMa1
	wfWxWMq8tY+TuPBCMcEXSZCS68CBuy6vnE+qzokI53N4RxJLMsddohzJKHrI+RRP
	YOsWypn+QFdfDiz0abC8GdIUx/U42gm4JiVBUh+6qUQDYcsPcC7AfFBmXwARAQAB
	tD5Gb3JlbWFuIEF1dG9tYXRpYyBTaWduaW5nIEtleSAoMjAxNikgPHBhY2thZ2Vz
	QHRoZWZvcmVtYW4ub3JnPokCPgQTAQIAKAIbAwYLCQgHAwIGFQgCCQoLBBYCAwEC
	HgECF4AFAmBLaU0FCQslOnQACgkQb4YAuVYyePaOiRAAqBtJ/eeA33sWoAqlH4CN
	dyC9P5icGnUxo1hYQlIaSh7w59p74ro3iqpwZH151CXET0zTXfICRQjufa1JeA9F
	RGq/5O8lOD22j4axRZ3MhYn/jwvhjEjmlasCVNigc7VMaWgzRpweWF/oX2alGF71
	JpDaHUfHIba4DzuNv6PD+H7GEl9ZmMnqhJF5PoCAVj1d+J9z+IXuZMqAWU5h91b3
	lJQq/Xfpi5ReykrsdmYOxiveJdZtAP2gXC0Sq98hDt7BhSoE8QJlRY9jBjgRPyrY
	cguO9KaTnCTn5XytJ+3ZBjSYVsVPxVYAur06qvEeIa3cp2UTfDShvdGGn6O6zf7n
	jAJh1iPe/91WhdKv5/67txFb6mdN/4fXRpWUfETbFdffwNBsENS4E8WqTWLPBOw+
	9rMlyoeSluI04es8Edc/Itkfu19Z1i2/YDLrThhX4o3dj1oAM0V3MxwOMw1S5hm+
	UJ6ClMiV1EiHyBAK65pKn6y1IxTJbHdoxNDqBrRYeSCXXVFPxPRofyPAj8YIAGd3
	ijlnY1PJyMhnGnMzFDQ8Vp3IUdkxteWa+DrcHe5NoLvl2wtSQ4TdSv/niQpVWddo
	izEji5VcRcP3AmKWvcH4UOQdLWH3NsHAqKurk39KnLOh+F5iy5X5rWn7T7ue8YWl
	+7s2SpY1JLlegiP4aEZ6RRm5Ag0EVwdiWQEQALJUNPo0bqmCsdPqp03ZlLQmuGNl
	ua7jJzgvd2vCZrCW7ucFD3rxE+MkpKzE+6t8XslnUwAqW8TUG7i2QKg2JivS2ZU0
	2Fj2i8/fOHp1mWLUJIpRT8UmW3AiMosN2K5vsCO9euwepMIrLnv3+3kKxu5i/ayy
	nCkSo0BX2ETXvnflm1MO38DhHXIaOmMAUmVVJjsNVkX7UQSDLxAqiSCzPGGSWYiW
	dsnxvvu/YKU0qjXEKfJVYb+74ozUILqgkLzl0bCvoYjWotqBIlIsY2MawqAxDgVo
	ySkjhN0GHLCYRJ9v27Xc/O1x7kPqqmdq2+Mk9DFkkrdDOK/9NPnar0DXIXJVsqr5
	pgJhm8/hUdxhXpVKKC+R6ONNNCZk3xxmHhjnY4A4LXRaDASq5Om8MxyyKT0cgroF
	Q2xuU8plaUcIKM0B4qGEqdlDE+ZwsiN0WAmW/R3Hwg0sfIiDRr8PcYMReRK8RzR9
	ej6AHuLKWmirigfH4lUmsA9sylf4q1dmPA1kNv5l1BnDNmnx0Wlq9qTe50LNQh59
	NPLf1qqyCHwGDNQX/OrwYDRojA7dNrwGy2NGWBfhbt8T1XbAfqo5b7rae0g1pRUN
	pJDMfGqlk/kXtrrmJSIuQOrwGn9KaJCk2DKX/STPY16G9neaQ6f1sOJJ24RskOhO
	C6LJCGcDPPoscsVXABEBAAGJAiUEGAECAA8CGwwFAmBLacAFCQslOucACgkQb4YA
	uVYyePYdWg//UKWo1a+2m3EOscOQYtTBH6rNfSIecgnWkCQuGnZuODK1c3vxGQL6
	xkY9+1zMjLYUVAjG2h3Hd7WMU5agvemyTZf1gbdwSgVdt1y5NVWsBPKXoyn2vbm8
	kE/gECP6+8gJSatWI931e3R+m93HqN3cCGw1WUVXuDA65TsgPuoDxAf1VoB1Ewti
	Qa4Ni8lKzRQn3qc4LsHEn2XfVmebR7cWAtGCLbHCpqE3ZPRi1RnqWJ73NsLX2eq4
	gVoqwchrqbOf1OICPr0vlkICTG8ydcy/3urziJdYQivEXK5USd27c5kK8p5YU6It
	DOGPHe045uwpChLRyslY6qYm0WlhBgWIAFr8dzhAyOhuWz3I6Iw43DACLa+co+WR
	FZ33FqYTbl+F5x+x983alzXG0+8/eJ0fdcEOPj+C/GbJaKwXjpQk3l7OpUwLIQNy
	nFVRXYaD1g2i6pHgWhhqFlWqo6fHrbD2Hzm9HCNS5eWiB/JGFZKyGBpBMh22/k6O
	bIZ8SVgErE+AwvAE7HCnr+Pun/Iblrlb6fLC6J4WHumvmAIPLznIViUekC0jvEym
	kNo8dY3LUn8NlQJ/qtBZDNf/OvP5LjiHPJdLlTyc+eZDGIszkPwLO/rjUfJGaD20
	1vYLOIp+VREV4ODtMQfkLv7W+ynhzAgOZJBiJWU0CwLbnWza4D+yIIc=
	=Fyc2
	-----END PGP PUBLIC KEY BLOCK-----
	-----BEGIN PGP PUBLIC KEY BLOCK-----

	mQINBGD6Y/UBEADOhGOD74lvHdUAew1cHjAUTbopfoXvFvo5jXs4ra3IblnzPEOJ
	yOZr/Zt9Guf2w0F/1/4U5ppgqf3YjwKLCpIYM6JV/N2c+zBaQmQEYRFGJNzHRt/i
	v4cL67FRF2lxFNldW26/MFDF2ax/LD3qglDLgqgaWEA/2lg6XHBFskeQDToSdx4R
	VKP6svCkgNGcxXZMKwHa+/ruYHCu4chfZPGJHLWB351zchTwnw6k7F2ersXvAM4i
	YaN4NHv8C2uY2ku8v3uX0H8wC2nXEDBU3uHBun7E/lLABNJpyqAFQrioRAOAn0r7
	AYGLN2s4Ke6BMn1uVHarl3MN4kmPqkl7rG0q+bwv9e/D//lKGo6bJRZSeeFMpHiG
	kvgUIHoGBOKSbYwn0UBXXt3VHBFp/kaUOKlWYYEs/XHUBZ7fVXlD7UpjMMfNXXGv
	QjW/zRjZ5tIMBqMYibxHUExcRRytxSNX9JmVLaE2Hof2lQcEEzmVaSzpWT9/bsUx
	DGfwew5gptDDEKH+3z+heJ4b9/vwjIhdLOczkFSFAXamZfkGWjsrgXWpbT7+tNg6
	8LPQtBpo8mgsE7clTZFKH/fF+Ng2Cy1M5zW3kshYuwPGxaQPnDq8HXCIpWA3aRRd
	AqJ9aAFCG2t4CpcjMIqfckbxqI77nbZEX82jCIceu2fpruvOjC4PtDsmdQARAQAB
	tD5Gb3JlbWFuIEF1dG9tYXRpYyBTaWduaW5nIEtleSAoMjAyMSkgPHBhY2thZ2Vz
	QHRoZWZvcmVtYW4ub3JnPokCVAQTAQgAPhYhBFt8PlpzW8tNYVgp3AvdqZH9eqyK
	BQJg+mP1AhsvBQkDwmcABQsJCAcCBhUKCQgLAgQWAgMBAh4BAheAAAoJEAvdqZH9
	eqyKn44P/iVhpU8u8SXWV1dBtQsbbbVEoRwd+iCr5+V6Wws1xtDMYVhJ4ANrO8mH
	mb+IJ0jx6fqCZB1kZOt7T3DV32+6b3FH5ncI9wsCYmggezDGCZ0lRLlZChbLm44Z
	uv8IJYEexPTICW+soB6+SUBBK3s9XQ8WbNtJmhaDLxRIGUqSrmr5+u62hcc2MnIO
	SQ3HCgKkqM/o2E2mHQ06e/1JUxgbPY7vne3fOtcZFyhn/AHMkyG6zrGdNZxvAbLL
	PMfTYswBMJI/FVXeXtkNN4Y9OZJz3MkZvhwBe21diBuxYioXupJHQFETdvFVuLLc
	AqrRQDNQCcRUrFzto+R118c/jtwlUHY7jBSCA7byuZIlxsWaLcGc2LstLuU26cNn
	gqyRCXPSX2XZaSzIJT0xVejPSYG9dLzIbY+5L4P47ezUkgg1zupeEzvTLa2dQDl2
	rUSNMaN67g2K6KqEDx9Kql7msxJKiGKqxOm62unceXEez581fBhxbkG/QNjfgo4f
	orrpySxAO2H3m7kyVlRmfv1ThYFCLyGUg+KOwPBh28+rNyJd6D1MC2ZwsdL7t8Fz
	NgXfwHCn2Sgjt0fM4ppPvfM14aSM+N/r164LYLEZK6nYYKvDOo0awA6mYcTTyWIE
	YS8wZybtClEkdP0+pCjMp92Da9i92NCa6MljZMibGzmTbABEPmpd
	=cPp9
	-----END PGP PUBLIC KEY BLOCK-----
	EOF
fi
