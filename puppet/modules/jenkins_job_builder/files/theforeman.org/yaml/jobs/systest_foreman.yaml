- job:
    name: systest_foreman
    node: 'el && ipv6'
    concurrent: true
    logrotate:
      daysToKeep: 8
      numToKeep: -1
    scm:
      - forklift
    builders:
      - systest_foreman
    wrappers:
      - abort_build:
          timeout_min: 60
    parameters:
      - string:
          name: repo
          default: nightly
          description: 'Repo to test. Prefixes appropriate to the test repo is automatically added ("foreman" for koji, "theforeman" for stagingdeb), so use only the variable component, e.g. <code>nightly</code> or <code>1.6</code>'
      - string:
          name: repo_environment
          default: release
          description: 'Whether to use <code>staging</code> packages (koji/stagingdeb) or <code>release</code> packages'
      - string:
          name: os
          default: ''
          description: 'OS code, e.g. <code>centos7</code>, <code>debian9</code>, <code>ubuntu1604</code>'
      - string:
          name: pl_puppet
          default: ''
          description: 'Whether to install Puppet from a non-default repo. Set to 3/4/5 for a specific repo, false to disable, or empty to choose a reasonable working version.'
      - bool:
          name: run_hammer_tests
          default: false
          description: 'Whether to run additional hammer tests (https://github.com/theforeman/hammer-tests).'
      - string:
          name: db_type
          default: ''
          description: 'Database server to use, default is PostgreSQL (postgresql/mysql/sqlite)'
      - string:
          name: umask
          default: ''
          description: 'umask value for all shells, default is OS default (e.g. 022)'
      - string:
          name: expected_version
          default: ''
          description: 'Verifies the installed version of Foreman packages matches this value, if set.'
    publishers:
      - systest
